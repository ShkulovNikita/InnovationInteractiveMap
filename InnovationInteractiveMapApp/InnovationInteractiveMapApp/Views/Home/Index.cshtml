@{
    ViewBag.Title = "Home Page";
}


<div class="row">
    <div class="col-md-9">
        <div id="map" style="width: 600px; height: 400px"></div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
                integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
                crossorigin=""></script>
        <script>
            //расположение файла с границами и информацией о странах
            var myGeoJSONPath = './../Map/countries.geojson';

            //задание свойств и отображение карты
            $.getJSON(myGeoJSONPath, function (data) {
                //отобразить карту, указать начальное положение
                var map = L.map('map').setView([39.74739, -105], 4);

                //токен для работы с библиотекой
                var mapboxAccessToken = 'pk.eyJ1Ijoid29ydGhsZXNza25pZ2h0IiwiYSI6ImNrbXFhd3p2NzJtbngycHBmdzExbDh2MDgifQ.VXXw4aA6Vw9bm6iD58VnOA';

                //выделение границ стран
                L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=' + mapboxAccessToken, {
                    id: 'mapbox/light-v9',
                    tileSize: 512,
                    zoomOffset: -1
                }).addTo(map);

                //TODO
                //функция, устанавливающая цвета стран
                function getColor(d) {
                    return d < 200 ? '#AAAAAA' :
                        '#FFEDA0';
                }

                function style(feature) {
                    return {
                        fillColor: getColor(feature.properties.total_patent_applications),
                        weight: 2,
                        opacity: 1,
                        color: 'white',
                        dashArray: '3',
                        fillOpacity: 0.7
                    };
                }

                geojson = L.geoJson(data, { style: style }).addTo(map);
            })
        </script>
    </div>
</div>